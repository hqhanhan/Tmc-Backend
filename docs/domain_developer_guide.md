# 后端业务开发指南 #

先测试目的：以业务为主的开发，服务端利用测试，倒推业务，理解、完善业务需求后(与需求人员达成一致)，再进行开发，避免因业务需求不理解开发，反复修改代码。

## 原则 ##
1. 手边工具 > 文档
2. 变化 > 计划

## 过程 ##
1. 需求 -> 业务逻辑
2. 编写测试 -> 服务层设计、实体层设计、数据传输层设计
3. 审查设计
4. 实现服务层(service)
5. 从服务层推导数据层(mapper)
6. 审查实现
7. 编写数据传输层(controller)

## 业务逻辑 ##
(此处略去三百页……)

## 编写测试 ##

### 服务层 ###
1. 对每个业务逻辑编写服务测试
2. 对关联的业务逻辑编写业务流测试
3. 从服务层逻辑中，导出 po 或 dto 的设计

## 审查设计 ##
测试编写完成后，提交测试进行审查。主要为服务层的接口与业务逻辑的一致性、完整性。

## 实现服务层 ##
1. 从测试生成服务层的类结构
2. 实现类结构中的每个方法
3. 需要操作数据时，分离出数据层

## 推导数据层 ##
根据编写服务层时候的需要，编写数据层

## 审查实现 ##
完成服务、数据层后，提交审查。主要检查测试通过率，及各项内部代码是否符合代码规范与原则。

## 编写数据传输层 ##
1. 对每个服务，编写 web api(controller)
2. 使用接口工具进行测试[postman]



规范：seed模块，为示例模块

1. 除 controller 层，所有参数必须具有确定性，不得是通用的 Map 或 JsonObject 类型
2. 除 controller 层，所有接口、方法不得带有隐含的前置条件
3. controller 层尽可能使用确定性参数，避免接受/返回 Map/JsonObject 类型
4. service必须以 interface / implement 方式编写，注解 @Service 应该放到 implement 之上
5、service，controller层接口，注释清楚调用方法参数示例
6. 业务模块内部遵循分层原则：
配置(spring)、
数据传输层(controller)、
    接口注释明确，并且在参数上，添加 请求接口具体数据格式示范；
    只调用相关的service，不做任何逻辑处理
服务层(service)、
    service接口，serviceImpl具体实现
数据层(mapper)、
转换(dto)、
实体层(po)、
核心部分(core)
特定工具类(util)

方法命名规范：
查询方法前缀：query
添加方法前缀：add
更新方法前缀：update
删除方法前缀：delete

